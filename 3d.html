<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Three.js 图片移动</title>
    <style>
        body { margin: 0; }  
        canvas { display: block; }  
        #controls { position: absolute; bottom: 10px; left: 10px; }  button{width:50px;height:50px;user-select:none;}
    </style>

    <style>
        ({
          const loader = new THREE.CubeTextureLoader();
          const texture = loader.load([
            'resources/images/cubemaps/computer-history-museum/pos-x.jpg',
            'resources/images/cubemaps/computer-history-museum/neg-x.jpg',
            'resources/images/cubemaps/computer-history-museum/pos-y.jpg',
            'resources/images/cubemaps/computer-history-museum/neg-y.jpg',
            'resources/images/cubemaps/computer-history-museum/pos-z.jpg',
            'resources/images/cubemaps/computer-history-museum/neg-z.jpg',
          ]);
          scene.background = texture;
        })()
    </style>
</head>

<body>
    <div id="controls">
        <button id="forward" style="position:absolute;bottom:60px;left:60px;">前进</button>
        <button id="backward" style="position:absolute;left:60px;">后退</button>
        <button id="left">左移</button>
        <button id="right" style="position:absolute;left:120px;">右移</button>
        <div style="position:fixed;bottom:120px;right:0px;">
            <button id="up" style="position:absolute;right:10px;">上移</button>
            <button id="down" style="position:absolute;right:10px;bottom:-110px;">下移</button>

        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/three@latest/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.131.2/examples/js/controls/OrbitControls.js"></script>

    <script>
        let scene, camera, renderer, planeMesh;  
                let moveSpeed = 0.05; // 可以调整移动速度  
        
                let moveForwardInterval, moveBackwardInterval, moveLeftInterval, moveRightInterval, moveDownInterval, moveUpInterval; 
                
                function init() {  
                    // 创建场景  
                    scene = new THREE.Scene(); 
                  
                  const urls = ["https://ts1.cn.mm.bing.net/th/id/R-C.c95a3fbc14e9d033aa6a454ef071590d?rik=x8u3OdO7f%2fgFgQ&riu=http%3a%2f%2fimg95.699pic.com%2felement%2f40149%2f0683.png_860.png&ehk=%2bOgxXkfX6u%2b4A22OxO3k9bMeRtS28kZIS%2fgjIVYe8kM%3d&risl=&pid=ImgRaw&r=0","https://ts1.cn.mm.bing.net/th/id/R-C.c95a3fbc14e9d033aa6a454ef071590d?rik=x8u3OdO7f%2fgFgQ&riu=http%3a%2f%2fimg95.699pic.com%2felement%2f40149%2f0683.png_860.png&ehk=%2bOgxXkfX6u%2b4A22OxO3k9bMeRtS28kZIS%2fgjIVYe8kM%3d&risl=&pid=ImgRaw&r=0","https://img.moeyy.xyz/file/75341ff6d1c31ccb9eab7.jpg","https://img.moeyy.xyz/file/ec6495d6714058fa30fd0.jpg","https://ts1.cn.mm.bing.net/th/id/R-C.c95a3fbc14e9d033aa6a454ef071590d?rik=x8u3OdO7f%2fgFgQ&riu=http%3a%2f%2fimg95.699pic.com%2felement%2f40149%2f0683.png_860.png&ehk=%2bOgxXkfX6u%2b4A22OxO3k9bMeRtS28kZIS%2fgjIVYe8kM%3d&risl=&pid=ImgRaw&r=0","https://ts1.cn.mm.bing.net/th/id/R-C.c95a3fbc14e9d033aa6a454ef071590d?rik=x8u3OdO7f%2fgFgQ&riu=http%3a%2f%2fimg95.699pic.com%2felement%2f40149%2f0683.png_860.png&ehk=%2bOgxXkfX6u%2b4A22OxO3k9bMeRtS28kZIS%2fgjIVYe8kM%3d&risl=&pid=ImgRaw&r=0"];
                  var loader = new THREE.CubeTextureLoader();
                  var textureCube = loader.load(urls);
                  textureCube.format = THREE.RGBAFormat; 
                  textureCube.generateMipmaps = false;
                  scene.background = textureCube;
        //var cubeLoader = loader.load("https://threejs.org/manual/examples/resources/images/equirectangularmaps/tears_of_steel_bridge_2k.jpg",() => {cubeLoader.mapping = THREE.EquirectangularReflectionMapping;cubeLoader.colorSpace = THREE.SRGBColorSpace;scene.background = cubeLoader;});
                      
                  var axes = new THREE.AxesHelper( 20 );
                    scene.add(axes);
                    // 创建相机  
                    camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);  
                    camera.position.set(0, 0, 5);  
                 
                    // 创建渲染器  
                    renderer = new THREE.WebGLRenderer({antialias: true});  
                    renderer.setSize(window.innerWidth, window.innerHeight);  
                    document.body.appendChild(renderer.domElement);  
                      
                    // 加载纹理  
                    const textureLoader = new THREE.TextureLoader();  
                    const texture = textureLoader.load('https://i.morechatol.eu.org/good.png'); // 替换为你的图片路径  
                      
                    // 创建平面几何体  
                    const geometry = new THREE.PlaneGeometry(1, 1);  
                      
                    // 创建材质  
                    const material = new THREE.MeshBasicMaterial({ map: texture,side: THREE.DoubleSide  });  
                      
                    // 创建平面网格  
                    planeMesh = new THREE.Mesh(geometry, material);  
                    scene.add(planeMesh);  
                  
                  let geometry2 = new THREE.BoxGeometry(1, 1, 1);
        const material2 = new THREE.MeshBasicMaterial({ color: 0xff0000 ,map: texture}); // 使用最基础的材质，颜色设为红色
        const cube = new THREE.Mesh(geometry2, material2);
        cube.position.set(2, 0, 0)
        scene.add(cube);
        const tick = () => {
          cube.rotation.y += 0.01;
          renderer.render(scene, camera);
          window.requestAnimationFrame(tick);
        };
        tick();
        
                    // 绑定按钮事件  
                    document.getElementById('forward').addEventListener('mousedown', startMovingForward);  
                    document.getElementById('forward').addEventListener('mouseup', stopMovingForward);  
                    document.getElementById('forward').addEventListener('mouseleave', stopMovingForward); // 如果鼠标离开按钮也停止移动  
                  
                    document.getElementById('backward').addEventListener('mousedown', startMovingBackward);  
                    document.getElementById('backward').addEventListener('mouseup', stopMovingBackward);  
                    document.getElementById('backward').addEventListener('mouseleave', stopMovingBackward);  
                  
                    document.getElementById('left').addEventListener('mousedown', startMovingLeft);  
                    document.getElementById('left').addEventListener('mouseup', stopMovingLeft);  
                    document.getElementById('left').addEventListener('mouseleave', stopMovingLeft);  
                  
                    document.getElementById('right').addEventListener('mousedown', startMovingRight);  
                    document.getElementById('right').addEventListener('mouseup', stopMovingRight);  
                    document.getElementById('right').addEventListener('mouseleave', stopMovingRight); 
        
                    document.getElementById('up').addEventListener('mousedown', startMovingUp);  
                    document.getElementById('up').addEventListener('mouseup', stopMovingUp);  
                    document.getElementById('up').addEventListener('mouseleave', stopMovingUp); 
        
                    document.getElementById('down').addEventListener('mousedown', startMovingDown);  
                    document.getElementById('down').addEventListener('mouseup', stopMovingDown);  
                    document.getElementById('down').addEventListener('mouseleave', stopMovingDown); 
                  
        let keys = {  
          w: false,  
          a: false,  
          s: false,  
          d: false,  
          Shift: false,  
          ' ': false  
        };  
          
        document.addEventListener('keydown', function(event) {  
          switch (event.key) {  
            case 'w':  
              if (!keys.w) {  
                keys.w = true;  
                startMovingForward();  
              }  
              break; // 添加break语句  
            case 'a':  
              if (!keys.a) {  
                keys.a = true;  
                startMovingLeft();  
              }  
              break; // 添加break语句  
            case 's':  
              if (!keys.s) {  
                keys.s = true;  
                startMovingBackward();  
              }  
              break; // 添加break语句  
            case 'd':  
              if (!keys.d) {  
                keys.d = true;  
                startMovingRight();  
              }  
              break; // 添加break语句  
            case 'Shift':  
              if (!keys.Shift) {  
                keys.Shift = true;  
                startMovingDown();  
              }  
              break; // 添加break语句  
            case ' ':  
              if (!keys[' ']) {  
                keys[' '] = true;  
                startMovingUp();  
              }  
              break; // 添加break语句  
          }  
        });  
          
        document.addEventListener('keyup', function(event) {  
          switch (event.key) {  
            case 'w':  
              if (keys.w) {  
                keys.w = false;  
                stopMovingForward(); // 假设有一个与startMovingForward对应的stop函数  
              }  
              break; // 添加break语句  
            case 'a':  
              if (keys.a) {  
                keys.a = false;  
                stopMovingLeft(); // 假设有一个与startMovingLeft对应的stop函数  
              }  
              break; // 添加break语句  
            case 's':  
              if (keys.s) {  
                keys.s = false;  
                stopMovingBackward(); // 假设有一个与startMovingBackward对应的stop函数  
              }  
              break; // 添加break语句  
            case 'd':  
              if (keys.d) {  
                keys.d = false;  
                stopMovingRight(); // 假设有一个与startMovingRight对应的stop函数  
              }  
              break; // 添加break语句  
            case 'Shift':  
              if (keys.Shift) {  
                keys.Shift = false;  
                stopMovingDown(); // 假设有一个与startMovingDown对应的stop函数  
              }  
              break; // 添加break语句  
            case ' ':  
              if (keys[' ']) {  
                keys[' '] = false;  
                stopMovingUp(); // 假设有一个与startMovingUp对应的stop函数  
              }  
              break; // 添加break语句  
          }  
        });
                      // 为前进按钮添加触摸事件  
                    var forwardButton = document.getElementById('forward');  
                    forwardButton.addEventListener('touchstart', startMovingForward);  
                    forwardButton.addEventListener('touchend', stopMovingForward);  
                    forwardButton.addEventListener('touchcancel', stopMovingForward); // 当触摸被取消时停止移动  
                  
                    // 为后退按钮添加触摸事件  
                    var backwardButton = document.getElementById('backward');  
                    backwardButton.addEventListener('touchstart', startMovingBackward);  
                    backwardButton.addEventListener('touchend', stopMovingBackward);  
                    backwardButton.addEventListener('touchcancel', stopMovingBackward);  
                  
                    // 为左移按钮添加触摸事件  
                    var leftButton = document.getElementById('left');  
                    leftButton.addEventListener('touchstart', startMovingLeft);  
                    leftButton.addEventListener('touchend', stopMovingLeft);  
                    leftButton.addEventListener('touchcancel', stopMovingLeft);  
                  
                    // 为右移按钮添加触摸事件  
                    var rightButton = document.getElementById('right');  
                    rightButton.addEventListener('touchstart', startMovingRight);  
                    rightButton.addEventListener('touchend', stopMovingRight);  
                    rightButton.addEventListener('touchcancel', stopMovingRight);  
                  
                    // 为上移按钮添加触摸事件  
                    var upButton = document.getElementById('up');  
                    upButton.addEventListener('touchstart', startMovingUp);  
                    upButton.addEventListener('touchend', stopMovingUp);  
                    upButton.addEventListener('touchcancel', stopMovingUp); 
        
                    // 为下移按钮添加触摸事件  
                    var downButton = document.getElementById('down');  
                    downButton.addEventListener('touchstart', startMovingDown);  
                    downButton.addEventListener('touchend', stopMovingDown);  
                    downButton.addEventListener('touchcancel', stopMovingDown); 
                      
        // 初始化OrbitControls  
        var controls = new THREE.OrbitControls(camera, renderer.domElement);
          
        // 设置OrbitControls的属性（可选）  
        controls.enablePan =false;
        controls.enableDamping = true;  
        controls.dampingFactor = 0.25;  
        controls.enableRotate = true;  
                  
                    // 渲染循环  
                    function animate() {  
                        requestAnimationFrame(animate);  
                        renderer.render(scene, camera);  
                    }  
                    animate();  
                      
                    // 窗口大小改变时更新相机和渲染器  
                    window.addEventListener('resize', onWindowResize, false);  
                }  
                  
                function moveCamera(x, y, z) {  
                    camera.position.x += x;  
                    camera.position.y += y;  
                    camera.position.z += z;  
                }  
                  
                function onWindowResize() {  
                    camera.aspect = window.innerWidth / window.innerHeight;  
                    camera.updateProjectionMatrix();  
                    renderer.setSize(window.innerWidth, window.innerHeight);  
                }  
                  
                function startMovingForward() {  
                    moveForwardInterval = setInterval(() => moveCamera(0, 0, -moveSpeed), 25);
                }  
                  
                function startMovingBackward() {  
                    moveBackwardInterval = setInterval(() => moveCamera(0, 0, moveSpeed), 25);  
                }  
                  
                function startMovingLeft() {  
                    moveLeftInterval = setInterval(() => moveCamera(-moveSpeed, 0, 0), 25);  
                }  
                  
                function startMovingRight() {  
                    moveRightInterval = setInterval(() => moveCamera(moveSpeed, 0, 0), 25);  
                }  
                  
                function startMovingDown() {  
                    moveDownInterval = setInterval(() => moveCamera(0, -moveSpeed, 0), 25);  
                }  
        
                function startMovingUp() {  
                    moveUpInterval = setInterval(() => moveCamera(0, moveSpeed, 0), 25);  
                }  
        
                function stopMovingForward() {
                    clearInterval(moveForwardInterval); 
                }  
        
                function stopMovingBackward() {
                    clearInterval(moveBackwardInterval);  
                }  
        
                function stopMovingLeft() {
                    clearInterval(moveLeftInterval);  
                }  
        
                function stopMovingRight() {
                    clearInterval(moveRightInterval);  
                }  
        
                function stopMovingDown() {
                    clearInterval(moveDownInterval);  
                }  
        
                function stopMovingUp() {
                    clearInterval(moveUpInterval);  
                }  
                
                // 初始化  
                init();
        
    </script>
</body>

</html>